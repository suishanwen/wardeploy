<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>upload</title>
    <link href="https://bitcoinrobot.cn/file/assets/bootstrap.4.1.3/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div>
    <input type="file" id="file"/>
    <select id="tomcat">
        <option value="9093" selected>9093</option>
        <option value="9193">9193</option>
        <option value="9293">9293</option>
        <option value="9393">9393</option>
    </select>
    <button class="btn-primary" onclick="submit()">提交</button>
</div>
<script>
    const path = location.href.split(":")[0] + "://" + document.location.host;

    submit = ()=>{
        const val = document.getElementById("file").value;
        if(!val){
            alert("请选择zip包!");
            return;
        }
        const arr = val.split('\\');
        const fileName = arr[arr.length-1];
        let formData = new FormData();
        formData.append("tomcat",document.getElementById("tomcat").value);
        formData.append("name",fileName);
        formData.append("file",document.getElementById("file").files[0]);
        fetch(`${path}/upload`, {
          method: 'POST',
          body: formData
        })
        .then(response => console.log(response))
        .catch(error => console.error('Error:', error))
        .then(response => alert("成功"));
    }















































</script>
</body>
</html>